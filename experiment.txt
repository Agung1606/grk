import React, { useState } from 'react';
import { Button, Text, TextInput, View } from 'react-native';
import { RegisterAPI } from './api/auth'
import { postUserData } from './api/firestore/user';

export default function App() {
  const [credentials, setCredentials] = useState({});
  const [name, setName] = useState('');
  const [color, setColor] = useState('');
  
  const [userData, setUserData] = useState({});

  const register = async () => {
    try {
      let res = await RegisterAPI(credentials.email, credentials.password)
      postUserData({
        name,
        color,
        email: credentials.email,
        setUserData,
      })
      setCredentials({})
      setName('')
      setColor('')
    } catch (error) {
      console.log(error);
    }
  }

  return (
    <View className="flex-1 bg-white justify-center items-center">
      <Text className="text-2xl text-red-500">{userData?.name} is a good boy</Text>
      <TextInput
        placeholder="email"
        className="h-10 w-[80%] bg-gray-400"
        onChangeText={(e) => setCredentials({ ...credentials, email: e })}
        value={credentials.email}
      />
      <TextInput
        placeholder="password"
        className="h-10 w-[80%] my-2 bg-gray-400"
        onChangeText={(e) => setCredentials({ ...credentials, password: e })}
        value={credentials.password}
      />
      <TextInput
        placeholder="name"
        className="h-10 w-[80%] my-2 bg-gray-400"
        onChangeText={(e) => setName(e)}
        value={name}
      />
      <TextInput
        placeholder="color"
        className="h-10 w-[80%] my-2 bg-gray-400"
        onChangeText={(e) => setColor(e)}
        value={color}
      />
      <Button title='register' onPress={register} />
    </View>
  );
}